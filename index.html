<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EconoDeal – Le meilleur outil pour dénicher, revendre et économiser</title>
  <meta name="description" content="EconoDeal – Trouvez les meilleures liquidations au Canada en temps réel. / Find the best liquidation deals in Canada in real time." />
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    .glass { backdrop-filter: blur(8px); background: rgba(255,255,255,0.7); }
    .gradient { background: linear-gradient(135deg,#10b981 0%, #0ea5e9 50%, #6366f1 100%); }
  </style>
</head>
<body class="min-h-screen bg-gray-50 text-gray-800">
  <!-- Header -->
  <header class="gradient text-white">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center space-x-3">
        <img src="/public/logo.svg" alt="EconoDeal logo" class="w-10 h-10 rounded-xl bg-white p-1"/>
        <div>
          <h1 class="text-xl font-semibold">EconoDeal</h1>
          <p class="text-xs opacity-90" id="tagline">Le meilleur outil pour dénicher, revendre et économiser</p>
        </div>
      </div>
      <div class="flex items-center space-x-3">
        <button id="langToggle" class="px-3 py-2 rounded-lg bg-white text-gray-900 text-sm font-medium">FR</button>
        <a href="#invest" class="px-4 py-2 rounded-lg bg-black bg-opacity-20 hover:bg-opacity-30 text-white text-sm font-medium" id="investBtn">Investir</a>
        <a href="#signup" class="px-4 py-2 rounded-lg bg-white text-gray-900 font-semibold" id="trialBtn">Essai gratuit 14 jours</a>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 gradient opacity-20"></div>
    <div class="max-w-7xl mx-auto px-4 py-16 relative">
      <div class="grid md:grid-cols-2 gap-10 items-center">
        <div>
          <h2 id="heroTitle" class="text-3xl md:text-5xl font-extrabold leading-tight">Trouvez les meilleures liquidations au Canada, en temps réel.</h2>
          <p id="heroSub" class="mt-4 text-lg text-gray-600">Connecté à Best Buy, Walmart, Home Depot et plus* (démo Best Buy incluse ci-dessous).</p>
          <div class="mt-6 flex space-x-3">
            <a href="#deals" class="px-5 py-3 rounded-xl bg-gray-900 text-white font-semibold" id="seeDeals">Voir les liquidations</a>
            <a href="#features" class="px-5 py-3 rounded-xl border border-gray-300 font-semibold" id="seeFeatures">Fonctionnalités</a>
          </div>
          <p class="text-xs mt-3 text-gray-500" id="heroFoot">*Intégrations additionnelles à venir.</p>
        </div>
        <div class="glass rounded-2xl shadow-xl p-4">
          <div class="bg-gray-900 rounded-xl p-4 text-green-300 font-mono text-xs overflow-auto" style="max-height:260px">
            <div>// API Best Buy via proxy serveur</div>
            <div>GET /api/bestbuy?pageSize=24</div>
            <div>→ sécurise ta clé et évite CORS</div>
          </div>
          <p class="text-xs text-gray-600 mt-3" id="heroNote">La clé API est stockée côté serveur (Vercel), pas dans le navigateur.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section id="features" class="max-w-7xl mx-auto px-4 py-12">
    <h3 id="featTitle" class="text-2xl md:text-3xl font-bold">Fonctionnalités clés</h3>
    <div class="grid md:grid-cols-4 gap-6 mt-6">
      <div class="p-5 rounded-2xl bg-white shadow">
        <h4 class="font-semibold" id="f1">Recherche par SKU</h4>
        <p class="text-sm text-gray-600" id="f1d">Filtrez rapidement par SKU pour trouver les meilleures offres.</p>
      </div>
      <div class="p-5 rounded-2xl bg-white shadow">
        <h4 class="font-semibold" id="f2">Alertes personnalisées</h4>
        <p class="text-sm text-gray-600" id="f2d">Soyez notifié dès qu’un prix baisse ou qu’un article revient en stock.</p>
      </div>
      <div class="p-5 rounded-2xl bg-white shadow">
        <h4 class="font-semibold" id="f3">Disponibilité en magasin</h4>
        <p class="text-sm text-gray-600" id="f3d">Consultez la disponibilité par magasin et en ligne (lorsque disponible).</p>
      </div>
      <div class="p-5 rounded-2xl bg-white shadow">
        <h4 class="font-semibold" id="f4">Filtres avancés</h4>
        <p class="text-sm text-gray-600" id="f4d">Trier par rabais, prix, catégorie et plus.</p>
      </div>
    </div>
  </section>

  <!-- Deals (Best Buy via proxy) -->
  <section id="deals" class="max-w-7xl mx-auto px-4 py-12">
    <div class="flex items-end justify-between gap-4 flex-wrap">
      <div>
        <h3 id="dealsTitle" class="text-2xl md:text-3xl font-bold">Liquidations Best Buy (live)</h3>
        <p id="dealsNote" class="text-sm text-gray-600 mt-1">Données chargées via un proxy sécurisé.</p>
      </div>
      <div class="flex items-center gap-2">
        <button id="loadBtn" class="px-4 py-2 rounded-lg bg-gray-900 text-white font-semibold">Charger</button>
      </div>
    </div>
    <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="dealGrid"></div>
    <div id="dealEmpty" class="hidden mt-6 p-6 rounded-2xl border border-dashed text-center text-gray-500">
      <p id="emptyMsg">Aucune donnée chargée pour l’instant.</p>
    </div>
  </section>

  <!-- Investors -->
  <section id="invest" class="max-w-7xl mx-auto px-4 py-12">
    <div class="grid md:grid-cols-2 gap-8 items-center">
      <div>
        <h3 id="investTitle" class="text-2xl md:text-3xl font-bold">Espace investisseurs</h3>
        <p id="investTxt" class="text-gray-600 mt-2">Téléchargez le plan d’affaires et contactez-nous pour une démo complète.</p>
        <div class="mt-4 flex gap-3">
          <a href="#" class="px-4 py-2 rounded-xl bg-white border shadow text-sm" id="btnPlan">Télécharger le plan d’affaires (PDF)</a>
          <a href="#signup" class="px-4 py-2 rounded-xl bg-gray-900 text-white text-sm" id="btnContact">Nous contacter</a>
        </div>
      </div>
      <div class="p-6 rounded-2xl bg-white shadow">
        <ul class="space-y-2 text-sm text-gray-700 list-disc pl-4" id="kpis">
          <li>Recherche par SKU, alertes, filtres avancés</li>
          <li>Données en temps réel multi-enseignes (démo Best Buy)</li>
          <li>Essai gratuit 14 jours, plans abordables</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Signup -->
  <section id="signup" class="max-w-7xl mx-auto px-4 pb-16">
    <div class="grid md:grid-cols-2 gap-8">
      <div>
        <h3 id="signupTitle" class="text-2xl md:text-3xl font-bold">Rejoindre EconoDeal</h3>
        <p id="signupTxt" class="text-gray-600 mt-2">Recevez l’accès à la démo et aux nouveautés.</p>
        <form class="mt-4 grid gap-3">
          <input type="text" placeholder="Nom / Name" class="px-4 py-3 rounded-xl border" />
          <input type="email" placeholder="Courriel / Email" class="px-4 py-3 rounded-xl border" />
          <button type="button" class="px-5 py-3 rounded-xl bg-green-600 text-white font-semibold" id="signupBtn">S’inscrire</button>
          <p class="text-xs text-gray-500" id="signupNote">En vous inscrivant, vous acceptez de recevoir des communications de EconoDeal.</p>
        </form>
      </div>
      <div class="p-6 rounded-2xl bg-white shadow">
        <h4 class="font-semibold" id="faqTitle">FAQ rapide</h4>
        <ul class="mt-3 text-sm text-gray-700 space-y-2" id="faqList">
          <li>• Comment fonctionnent les intégrations? Nous utilisons des APIs publiques et des partenariats.</li>
          <li>• Est-ce légal? Oui, nous respectons les conditions d’utilisation et la confidentialité.</li>
          <li>• Puis-je annuler? Oui, en tout temps, sans frais.</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="border-t py-8 text-sm text-gray-500">
    <div class="max-w-7xl mx-auto px-4 flex flex-wrap items-center justify-between gap-3">
      <div>© <span id="year"></span> EconoDeal</div>
      <div class="space-x-4">
        <a href="#">Conditions</a>
        <a href="#">Confidentialité</a>
        <a href="#">Facebook</a>
      </div>
    </div>
  </footer>

  <script>
    const t = {
      fr: {
        tagline: "Le meilleur outil pour dénicher, revendre et économiser",
        heroTitle: "Trouvez les meilleures liquidations au Canada, en temps réel.",
        heroSub: "Connecté à Best Buy, Walmart, Home Depot et plus* (démo Best Buy incluse ci-dessous).",
        heroFoot: "*Intégrations additionnelles à venir.",
        featTitle: "Fonctionnalités clés",
        f1: "Recherche par SKU", f1d: "Filtrez rapidement par SKU pour trouver les meilleures offres.",
        f2: "Alertes personnalisées", f2d: "Soyez notifié dès qu’un prix baisse ou qu’un article revient en stock.",
        f3: "Disponibilité en magasin", f3d: "Consultez la disponibilité par magasin et en ligne (lorsque disponible).",
        f4: "Filtres avancés", f4d: "Trier par rabais, prix, catégorie et plus.",
        dealsTitle: "Liquidations Best Buy (live)", dealsNote: "Données chargées via un proxy sécurisé.",
        emptyMsg: "Aucune donnée chargée pour l’instant.",
        investTitle: "Espace investisseurs", investTxt: "Téléchargez le plan d’affaires et contactez-nous pour une démo complète.",
        btnPlan: "Télécharger le plan d’affaires (PDF)", btnContact: "Nous contacter",
        signupTitle: "Rejoindre EconoDeal", signupTxt: "Recevez l’accès à la démo et aux nouveautés.", signupNote: "En vous inscrivant, vous acceptez de recevoir des communications de EconoDeal.",
        faqTitle: "FAQ rapide"
      },
      en: {
        tagline: "The best tool to find, resell and save",
        heroTitle: "Find the best liquidation deals in Canada, in real time.",
        heroSub: "Connected to Best Buy, Walmart, Home Depot and more* (Best Buy demo below).",
        heroFoot: "*More integrations coming soon.",
        featTitle: "Key features",
        f1: "Search by SKU", f1d: "Quickly filter by SKU to find the best deals.",
        f2: "Custom alerts", f2d: "Get notified when prices drop or items restock.",
        f3: "Store availability", f3d: "See per-store and online availability (when available).",
        f4: "Advanced filters", f4d: "Sort by discount, price, category and more.",
        dealsTitle: "Best Buy deals (live)", dealsNote: "Loaded via a secure proxy.",
        emptyMsg: "No data loaded yet.",
        investTitle: "Investor space", investTxt: "Download the business plan and contact us for a full demo.",
        btnPlan: "Download business plan (PDF)", btnContact: "Contact us",
        signupTitle: "Join EconoDeal", signupTxt: "Get access to the demo and updates.", signupNote: "By signing up you agree to receive EconoDeal updates.",
        faqTitle: "Quick FAQ"
      }
    };

    let lang = "fr";
    function applyI18n(){
      const d=t[lang];
      document.getElementById("tagline").textContent=d.tagline;
      document.getElementById("heroTitle").textContent=d.heroTitle;
      document.getElementById("heroSub").textContent=d.heroSub;
      document.getElementById("heroFoot").textContent=d.heroFoot;
      document.getElementById("featTitle").textContent=d.featTitle;
      document.getElementById("f1").textContent=d.f1; document.getElementById("f1d").textContent=d.f1d;
      document.getElementById("f2").textContent=d.f2; document.getElementById("f2d").textContent=d.f2d;
      document.getElementById("f3").textContent=d.f3; document.getElementById("f3d").textContent=d.f3d;
      document.getElementById("f4").textContent=d.f4; document.getElementById("f4d").textContent=d.f4d;
      document.getElementById("dealsTitle").textContent=d.dealsTitle;
      document.getElementById("dealsNote").textContent=d.dealsNote;
      document.getElementById("emptyMsg").textContent=d.emptyMsg;
      document.getElementById("investTitle").textContent=d.investTitle;
      document.getElementById("investTxt").textContent=d.investTxt;
      document.getElementById("btnPlan").textContent=d.btnPlan;
      document.getElementById("btnContact").textContent=d.btnContact;
      document.getElementById("signupTitle").textContent=d.signupTitle;
      document.getElementById("signupTxt").textContent=d.signupTxt;
      document.getElementById("signupNote").textContent=d.signupNote;
      document.getElementById("faqTitle").textContent=d.faqTitle;
      document.getElementById("investBtn").textContent = lang==='fr'?'Investir':'Invest';
      document.getElementById("trialBtn").textContent = lang==='fr'?'Essai gratuit 14 jours':'Start free trial';
      document.getElementById("seeDeals").textContent = lang==='fr'?'Voir les liquidations':'See deals';
      document.getElementById("seeFeatures").textContent = lang==='fr'?'Fonctionnalités':'Features';
      document.getElementById("langToggle").textContent = lang.toUpperCase();
    }
    document.getElementById("langToggle").addEventListener("click", () => { lang = (lang==='fr'?'en':'fr'); applyI18n(); });

    function formatMoney(v){
      try { return new Intl.NumberFormat(lang==='fr'?'fr-CA':'en-CA',{ style:'currency', currency:'CAD'}).format(v); } catch { return `$${v}`; }
    }

    function renderDeals(items){
      const grid = document.getElementById('dealGrid');
      const empty = document.getElementById('dealEmpty');
      grid.innerHTML = '';
      if(!items.length){ empty.classList.remove('hidden'); return; }
      empty.classList.add('hidden');
      items.forEach(p => {
        const discount = p.regularPrice && p.salePrice ? Math.round(100 - (p.salePrice / p.regularPrice)*100) : 0;
        const card = document.createElement('a');
        card.href = p.url || '#';
        card.target = '_blank';
        card.className = 'group block bg-white rounded-2xl shadow hover:shadow-lg transition p-4';
        card.innerHTML = `
          <div class="aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-xl bg-gray-100">
            <img src="${p.thumbnailImage || ''}" alt="${p.name || ''}" class="object-contain w-full h-48 mx-auto"/>
          </div>
          <div class="mt-3">
            <div class="flex items-start justify-between gap-3">
              <h5 class="font-semibold line-clamp-2">${p.name || ''}</h5>
              ${discount>0 ? `<span class="text-xs px-2 py-1 rounded-lg bg-green-100 text-green-700 font-bold">-${discount}%</span>` : ''}
            </div>
            <div class="mt-1 text-sm text-gray-600 line-clamp-2">${p.shortDescription||''}</div>
            <div class="mt-2 flex items-center gap-2">
              ${p.salePrice?`<span class="text-lg font-extrabold">${formatMoney(p.salePrice)}</span>`:''}
              ${p.regularPrice?`<span class="text-sm line-through text-gray-400">${formatMoney(p.regularPrice)}</span>`:''}
            </div>
            <div class="mt-2 text-xs text-gray-500">SKU: ${p.sku||''}</div>
          </div>`;
        grid.appendChild(card);
      });
    }

    document.getElementById('loadBtn').addEventListener('click', async () => {
      const btn = document.getElementById('loadBtn');
      btn.disabled = true; btn.textContent = lang==='fr'? 'Chargement…':'Loading…';
      try {
        const res = await fetch('/api/bestbuy?pageSize=24');
        if(!res.ok) throw new Error('HTTP '+res.status);
        const data = await res.json();
        renderDeals(data.products || []);
      } catch (e) {
        renderDeals([]);
        alert((lang==='fr'? 'Erreur lors du chargement. ':'Load error. ')+ e.message);
      } finally {
        btn.disabled = false; btn.textContent = lang==='fr'? 'Charger':'Load';
      }
    });

    document.getElementById('year').textContent = new Date().getFullYear();
    applyI18n();
  </script>
</body>
</html>
